<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to convert a PCL (Portable) project to NetStandard | Nicola Iarocci</title>
<meta name=keywords content=".net,netstandard,visual studio"><meta name=description content="I have been upgrading a few projects from their original PCL profiles (now deemed obsolete) to the Net Standard platform specification. It turned out to be a relatively straightforward process, but it does have its small hurdles, especially so if in the meantime you also want to transition to the new, streamlined, .csproj format as the migration will leave you with a now obsolete project.json project. In this article, I will cover upgrading a project from Portable Class Library to NetStandard."><meta name=author content><link rel=canonical href=https://nicolaiarocci.com/how-to-convert-a-pcl-portable-project-to-netstandard/><link crossorigin=anonymous href=/assets/css/stylesheet.f0568d4df87da526a07cdd5f492b4a146e3fa93d5ee950200eaafb2bb50d6fd8.css integrity="sha256-8FaNTfh9pSagfN1fSStKFG4/qT1e6VAgDqr7K7UNb9g=" rel="preload stylesheet" as=style><link rel=icon href=https://nicolaiarocci.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://nicolaiarocci.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://nicolaiarocci.com/favicon-32x32.png><link rel=apple-touch-icon href=https://nicolaiarocci.com/apple-touch-icon.png><link rel=mask-icon href=https://nicolaiarocci.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="How to convert a PCL (Portable) project to NetStandard"><meta property="og:description" content="I have been upgrading a few projects from their original PCL profiles (now deemed obsolete) to the Net Standard platform specification. It turned out to be a relatively straightforward process, but it does have its small hurdles, especially so if in the meantime you also want to transition to the new, streamlined, .csproj format as the migration will leave you with a now obsolete project.json project. In this article, I will cover upgrading a project from Portable Class Library to NetStandard."><meta property="og:type" content="article"><meta property="og:url" content="https://nicolaiarocci.com/how-to-convert-a-pcl-portable-project-to-netstandard/"><meta property="article:section" content="post"><meta property="article:published_time" content="2017-05-10T09:47:05+02:00"><meta property="article:modified_time" content="2017-05-10T09:47:05+02:00"><meta property="og:site_name" content="Nicola Iarocci"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to convert a PCL (Portable) project to NetStandard"><meta name=twitter:description content="I have been upgrading a few projects from their original PCL profiles (now deemed obsolete) to the Net Standard platform specification. It turned out to be a relatively straightforward process, but it does have its small hurdles, especially so if in the meantime you also want to transition to the new, streamlined, .csproj format as the migration will leave you with a now obsolete project.json project. In this article, I will cover upgrading a project from Portable Class Library to NetStandard."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://nicolaiarocci.com/post/"},{"@type":"ListItem","position":3,"name":"How to convert a PCL (Portable) project to NetStandard","item":"https://nicolaiarocci.com/how-to-convert-a-pcl-portable-project-to-netstandard/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to convert a PCL (Portable) project to NetStandard","name":"How to convert a PCL (Portable) project to NetStandard","description":"I have been upgrading a few projects from their original PCL profiles (now deemed obsolete) to the Net Standard platform specification. It turned out to be a relatively straightforward process, but it does have its small hurdles, especially so if in the meantime you also want to transition to the new, streamlined, .csproj format as the migration will leave you with a now obsolete project.json project. In this article, I will cover upgrading a project from Portable Class Library to NetStandard.","keywords":[".net","netstandard","visual studio"],"articleBody":"I have been upgrading a few projects from their original PCL profiles (now deemed obsolete) to the Net Standard platform specification. It turned out to be a relatively straightforward process, but it does have its small hurdles, especially so if in the meantime you also want to transition to the new, streamlined, .csproj format as the migration will leave you with a now obsolete project.json project. In this article, I will cover upgrading a project from Portable Class Library to NetStandard. In a follow-up post, I plan to write about the switch from project.json to the new .csproj format.\nSo let us take the Eve.NET project as an example. It makes a good candidate because it is an open source project, so you can go and have a look at the source code before and after the switch from PCL to NetStandard.\nThe first step was, of course, opening the project in Visual Studio 2017. If you are on an older VS version, you should upgrade. For many valid reasons indeed, among them the fact that Visual Studio 2017 comes with a built-in option to switch a project to NetStandard.\nAs you can see, before the upgrade Eve.NET was a Profile259 PCL project. As metioned, Visual Studio offers the option to switch to the .NET Platform Standard. By clicking the link, you get a fair warning that you might not be able to use the same APIs when targeting NetStandard. That makes sense because, as you probably know already, NetStandard is an API specification while a PCL essentially is the intersection (or lowest common denominator) of the APIs available on target platforms. PCL compatibility has never been the design goal of NetStandard.\nGenerally speaking, NetStandard offers a wider range of APIs compared to most PCL profiles and, most importantly, is planned to go through a cycle of incremental upgrades of the API specification, each one denoted by a version number. We already went from 1.0 to 1.6, with 2.0 currently being developed. NetStandard 2 will be a significant milestone, just give a look at the impressive diff between 1.6 and 2.0. A lot of open source projects are eagerly waiting on NetStandard 2 release (Q3 2017).\nUpon confirming the switch, you might get the following show-stopper (I did):\nThis dialog will pop up if your project never has opted-in for NuGet 3.0. If this is the case, you have to go back, uninstall all NuGet packages, then attempt the switch again. When the migration is complete, you will have to re-install the packages, provided that they are compatible with NetStandard. In Eve.NET case the only dependency is Json.NET, which supports NetStandard 1.3, which also means that Eve cannot support previous NetStandard versions.\nNow, if you give a look at the installed packages, you will find that you have a couple of new entries: NETStandard.Library, which is pretty self-explanatory, and Microsoft.NETCore.Portable.Compatibility. This one will only appear when you convert from a PCL: a brand new NetStandard project will not take a dependency on it. If you are not using any legacy code, like NET 4.0-only, or Silverlight, you should be able to drop this dependency safely (I did with no consequences).\nThe project is now NetStandard and ready to be used on all the platforms supporting your chosen version: NETCore, Windows, Xamarin, UWP, you name it.\nHowever, you will soon notice that the project has gained a project.json file. It is ok, it works just fine, but it is obsolete: with Visual Studio 2017 project.json was abandoned for a new, streamlined and pretty darn powerful, .csproj project file. In the next article, I will show you how to move your project forward by dropping project.json and embracing the new project type (and other niceties, like dropping the .nuspec file in the process).\nJoin the newsletter to get an email alert when a new post surfaces on this site. If you want to get in touch, I am @nicolaiarocci on twitter.\n","wordCount":"659","inLanguage":"en","datePublished":"2017-05-10T09:47:05+02:00","dateModified":"2017-05-10T09:47:05+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://nicolaiarocci.com/how-to-convert-a-pcl-portable-project-to-netstandard/"},"publisher":{"@type":"Organization","name":"Nicola Iarocci","logo":{"@type":"ImageObject","url":"https://nicolaiarocci.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nicolaiarocci.com accesskey=h title="Home (Alt + H)"><img src=https://nicolaiarocci.com/images/avatar.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://nicolaiarocci.com/opensource/ title=code><span>code</span></a></li><li><a href=https://nicolaiarocci.com/speaking/ title=conferences><span>conferences</span></a></li><li><a href=https://nicolaiarocci.com/books-i-have-read/ title=library><span>library</span></a></li><li><a href=https://nicolaiarocci.com/archives/ title=archive><span>archive</span></a></li><li><a href=https://nicolaiarocci.com/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">How to convert a PCL (Portable) project to NetStandard</h1><div class=post-meta><span title='2017-05-10 09:47:05 +0200 CEST'>May 10, 2017</span></div></header><div class=post-content><p>I have been upgrading a few projects from their original PCL profiles (now
deemed obsolete) to the <a href=https://docs.microsoft.com/it-it/dotnet/articles/standard/library>Net Standard</a> platform specification. It turned out
to be a relatively straightforward process, but it does have its small hurdles,
especially so if in the meantime you also want to transition to the new,
streamlined, <code>.csproj</code> format as the migration will leave you with a now
obsolete <code>project.json</code> project. In this article, I will cover upgrading
a project from Portable Class Library to NetStandard. In a follow-up post,
I plan to write about the switch from <code>project.json</code> to the new <code>.csproj</code>
format.</p><p>So let us take the <a href=https://github.com/pyeve/Eve.NET/>Eve.NET</a> project as an example. It makes a good
candidate because it is an open source project, so you can go and have a look
at the source code <a href=https://github.com/pyeve/Eve.NET/tree/v0.2>before</a> and <a href=https://github.com/pyeve/Eve.NET/tree/netstandard>after</a> the switch from PCL to
NetStandard.</p><p>The first step was, of course, opening the project in Visual Studio 2017. If
you are on an older VS version, you should upgrade. For many valid reasons
indeed, among them the fact that Visual Studio 2017 comes with a built-in
option to switch a project to NetStandard.</p><p><img loading=lazy src=/images/netstandard1.png alt></p><p>As you can see, before the upgrade Eve.NET was a Profile259 PCL project. As
metioned, Visual Studio offers the option to switch to the .NET Platform
Standard. By clicking the link, you get a fair warning that <em>you might not be
able to use the same APIs when targeting NetStandard</em>. That makes sense
because, as you probably know already, NetStandard is an API specification
while a PCL essentially is the intersection (or lowest common denominator) of
the APIs available on target platforms. PCL compatibility has never been the
design goal of NetStandard.</p><p>Generally speaking, NetStandard offers a wider range of APIs compared to most
PCL profiles and, most importantly, is planned to go through a cycle of
incremental upgrades of the API specification, each one denoted by a version
number. We already went from 1.0 to 1.6, with 2.0 currently being developed.
<a href=https://github.com/dotnet/standard/blob/master/docs/netstandard-20/README.md>NetStandard 2</a> will be a significant milestone, just give a look at the
<a href=https://raw.githubusercontent.com/dotnet/standard/master/docs/versions/netstandard2.0_diff.md>impressive diff</a> between 1.6 and 2.0. A <em>lot</em> of open source projects are
eagerly waiting on NetStandard 2 release (Q3 2017).</p><p>Upon confirming the switch, you might get the following show-stopper (I did):</p><p><img loading=lazy src=/images/netstandard2.png alt></p><p>This dialog will pop up if your project never has opted-in for NuGet 3.0. If
this is the case, you have to go back, uninstall all NuGet packages, then
attempt the switch again. When the migration is complete, you will have to
re-install the packages, provided that they are compatible with NetStandard. In
Eve.NET case the only dependency is Json.NET, which supports NetStandard 1.3,
which also means that Eve cannot support previous NetStandard versions.</p><p>Now, if you give a look at the installed packages, you will find that you have
a couple of new entries: <code>NETStandard.Library</code>, which is pretty
self-explanatory, and <code>Microsoft.NETCore.Portable.Compatibility</code>. This one will
only appear when you convert from a PCL: a brand new NetStandard project will
not take a dependency on it. If you are not using any legacy code, like NET
4.0-only, or Silverlight, you should be able to drop this dependency safely (I
did with no consequences).</p><p>The project is now NetStandard and ready to be used on all the platforms
supporting your chosen version: NETCore, Windows, Xamarin, UWP, you name it.</p><p>However, you will soon notice that the project has gained a <code>project.json</code>
file. It is ok, it works just fine, but it is obsolete: with Visual Studio 2017
project.json was abandoned for a new, streamlined and pretty darn powerful,
<code>.csproj</code> project file. In the next article, I will show you how to move your
project forward by dropping <code>project.json</code> and embracing the new project type
(and other niceties, like dropping the <code>.nuspec</code> file in the process).</p><p><em>Join the <a href=http://eepurl.com/b-_Pzz>newsletter</a> to get an email alert when a new post surfaces on
this site. If you want to get in touch, I am @<a href=http://twitter.com/nicolaiarocci>nicolaiarocci</a> on twitter.</em></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://nicolaiarocci.com/tags/.net/>.net</a></li><li><a href=https://nicolaiarocci.com/tags/netstandard/>netstandard</a></li><li><a href=https://nicolaiarocci.com/tags/visual-studio/>visual studio</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://nicolaiarocci.com>Nicola Iarocci</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>