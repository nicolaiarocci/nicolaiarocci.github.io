<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Troubles with VirtualBox and the Windows Subsystem for Linux | Nicola Iarocci</title>
<meta name=keywords content="linux,windows10,virtualbox"><meta name=description content="Today I learned the hard way: don&rsquo;t you dare running a vanilla install of
VirtualBox together with Windows Subsystem for Linux v2 (WSL2). It won&rsquo;t work.
That&rsquo;s because WSL2 uses Hyper-V under the hood, which is incompatible with
VirtualBox.
According to the official documentation for VirtualBox v6.0:

Oracle VM VirtualBox can be used on a Windows host where Hyper-V is running.
This is an experimental feature. No configuration is required. Oracle VM
VirtualBox detects Hyper-V automatically and uses Hyper-V as the
virtualization engine for the host system."><meta name=author content><link rel=canonical href=https://nicolaiarocci.com/troubles-with-virtualbox-and-the-windows-subsystem-for-linux/><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://nicolaiarocci.com/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://nicolaiarocci.com/images/favicon16x16.ico><link rel=icon type=image/png sizes=32x32 href=https://nicolaiarocci.com/images/favicon32x32.ico><link rel=apple-touch-icon href=https://nicolaiarocci.com/images/favicon.ico><link rel=mask-icon href=https://nicolaiarocci.com/images/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://nicolaiarocci.com/troubles-with-virtualbox-and-the-windows-subsystem-for-linux/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://nicolaiarocci.com/troubles-with-virtualbox-and-the-windows-subsystem-for-linux/"><meta property="og:site_name" content="Nicola Iarocci"><meta property="og:title" content="Troubles with VirtualBox and the Windows Subsystem for Linux"><meta property="og:description" content="Today I learned the hard way: don’t you dare running a vanilla install of VirtualBox together with Windows Subsystem for Linux v2 (WSL2). It won’t work. That’s because WSL2 uses Hyper-V under the hood, which is incompatible with VirtualBox.
According to the official documentation for VirtualBox v6.0:
Oracle VM VirtualBox can be used on a Windows host where Hyper-V is running. This is an experimental feature. No configuration is required. Oracle VM VirtualBox detects Hyper-V automatically and uses Hyper-V as the virtualization engine for the host system."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-02-14T07:05:25+01:00"><meta property="article:modified_time" content="2021-02-14T07:05:25+01:00"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Windows10"><meta property="article:tag" content="Virtualbox"><meta name=twitter:card content="summary"><meta name=twitter:title content="Troubles with VirtualBox and the Windows Subsystem for Linux"><meta name=twitter:description content="Today I learned the hard way: don&rsquo;t you dare running a vanilla install of
VirtualBox together with Windows Subsystem for Linux v2 (WSL2). It won&rsquo;t work.
That&rsquo;s because WSL2 uses Hyper-V under the hood, which is incompatible with
VirtualBox.
According to the official documentation for VirtualBox v6.0:

Oracle VM VirtualBox can be used on a Windows host where Hyper-V is running.
This is an experimental feature. No configuration is required. Oracle VM
VirtualBox detects Hyper-V automatically and uses Hyper-V as the
virtualization engine for the host system."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://nicolaiarocci.com/post/"},{"@type":"ListItem","position":2,"name":"Troubles with VirtualBox and the Windows Subsystem for Linux","item":"https://nicolaiarocci.com/troubles-with-virtualbox-and-the-windows-subsystem-for-linux/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Troubles with VirtualBox and the Windows Subsystem for Linux","name":"Troubles with VirtualBox and the Windows Subsystem for Linux","description":"Today I learned the hard way: don\u0026rsquo;t you dare running a vanilla install of VirtualBox together with Windows Subsystem for Linux v2 (WSL2). It won\u0026rsquo;t work. That\u0026rsquo;s because WSL2 uses Hyper-V under the hood, which is incompatible with VirtualBox.\nAccording to the official documentation for VirtualBox v6.0:\nOracle VM VirtualBox can be used on a Windows host where Hyper-V is running. This is an experimental feature. No configuration is required. Oracle VM VirtualBox detects Hyper-V automatically and uses Hyper-V as the virtualization engine for the host system.\n","keywords":["linux","windows10","virtualbox"],"articleBody":"Today I learned the hard way: don’t you dare running a vanilla install of VirtualBox together with Windows Subsystem for Linux v2 (WSL2). It won’t work. That’s because WSL2 uses Hyper-V under the hood, which is incompatible with VirtualBox.\nAccording to the official documentation for VirtualBox v6.0:\nOracle VM VirtualBox can be used on a Windows host where Hyper-V is running. This is an experimental feature. No configuration is required. Oracle VM VirtualBox detects Hyper-V automatically and uses Hyper-V as the virtualization engine for the host system.\nWell, that did not prove to be true in my case. Hence the experimental clause, I guess. A little googling revealed that, indeed, it did work for a while, then a new Windows 10 release broke it again:\nThe Hyper-V API became a viable reality with 1803, practically with 1809. And it went fine with 1903. And it broke with 1909. Please use your favorite search engine for “Immature API”… (source)\nEven if it did work, however, you’d run into some (possibly) severe performance degradation. Quoting from the same official documentation page:\nWhen using this feature, some host systems might experience significant Oracle VM VirtualBox performance degradation.\nIf you don’t need to run WSL2 and your VMs simultaneously, one workaround is to disable WSL2 in the Windows Features. There, you have to disable Hyper-V, Virtual Machine Platform, and Windows Subsystem for Windows. Yes, I had to explicitly disable all three of them. When you eventually reactivate them, WSL2 will start working again, configurations included.\nAnother option is to fallback to WSL1. That will work. Unlike WSL2, WSL1 does not run in a VM. Also, converting back and forth between WSL1 and WLS2 is dead simple. I did not go this route because, well, I like the performance that comes with WSL2. I also plan to use VirtualBox only rarely, when I need to test new versions of our desktop application’s installation procedure.\nThis is all not ideal, of course. The situation is evolving. This ticket on the WSL documentation repository is probably the place to watch for updates.\nHopefully, soon, once the currently “immature API” stabilizes, I will be able to come back to this article, edit it, and note that now everything works as expected.\n","wordCount":"373","inLanguage":"en","datePublished":"2021-02-14T07:05:25+01:00","dateModified":"2021-02-14T07:05:25+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://nicolaiarocci.com/troubles-with-virtualbox-and-the-windows-subsystem-for-linux/"},"publisher":{"@type":"Organization","name":"Nicola Iarocci","logo":{"@type":"ImageObject","url":"https://nicolaiarocci.com/images/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nicolaiarocci.com/ accesskey=h title="Nicola Iarocci (Alt + H)"><img src=https://nicolaiarocci.com/images/avatar.png alt aria-label=logo height=35>Nicola Iarocci</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://nicolaiarocci.com/about/ title=about><span>about</span></a></li><li><a href=https://nicolaiarocci.com/opensource/ title=code><span>code</span></a></li><li><a href=https://nicolaiarocci.com/speaking/ title=speaking><span>speaking</span></a></li><li><a href=https://nicolaiarocci.com/books-i-have-read/ title=library><span>library</span></a></li><li><a href=https://buttondown.email/nicolaiarocci title=newsletter><span>newsletter</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://nicolaiarocci.com/index.xml title=rss><span>rss</span></a></li><li><a href=https://nicolaiarocci.com/archives/ title=archive><span>archive</span></a></li><li><a href=https://nicolaiarocci.com/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Troubles with VirtualBox and the Windows Subsystem for Linux</h1><div class=post-meta><span title='2021-02-14 07:05:25 +0100 CET'>February 14, 2021</span></div></header><div class=post-content><p>Today I learned the hard way: don&rsquo;t you dare running a vanilla install of
VirtualBox together with Windows Subsystem for Linux v2 (WSL2). It won&rsquo;t work.
That&rsquo;s because WSL2 uses Hyper-V under the hood, which is incompatible with
VirtualBox.</p><p>According to the <a href=https://docs.oracle.com/en/virtualization/virtualbox/6.0/admin/hyperv-support.html>official documentation</a> for VirtualBox v6.0:</p><blockquote><p>Oracle VM VirtualBox can be used on a Windows host where Hyper-V is running.
<strong>This is an experimental feature</strong>. No configuration is required. Oracle VM
VirtualBox detects Hyper-V automatically and uses Hyper-V as the
virtualization engine for the host system.</p></blockquote><p>Well, that did not prove to be true in my case. Hence the experimental clause,
I guess. A little googling revealed that, indeed, it did work for a while, then
a new Windows 10 release broke it again:</p><blockquote><p>The Hyper-V API became a viable reality with 1803, practically with 1809. And
it went fine with 1903. And it broke with 1909. Please use your favorite
search engine for &ldquo;Immature API&rdquo;&mldr; (<a href="https://forums.virtualbox.org/viewtopic.php?f=6&amp;t=90853&amp;start=195#p465333">source</a>)</p></blockquote><p>Even if it did work, however, you&rsquo;d run into some (possibly) severe
performance degradation. Quoting from the same official documentation page:</p><blockquote><p>When using this feature, some host systems might experience significant
Oracle VM VirtualBox performance degradation.</p></blockquote><p>If you don&rsquo;t need to run WSL2 and your VMs simultaneously, one workaround is to
disable WSL2 in the Windows Features. There, you have to disable Hyper-V,
Virtual Machine Platform, and Windows Subsystem for Windows. Yes, I had to
explicitly disable all three of them. When you eventually reactivate them, WSL2
will start working again, configurations included.</p><p>Another option is to fallback to WSL1. That will work. Unlike WSL2, WSL1 does
not run in a VM. Also, converting back and forth between WSL1 and WLS2 is dead
simple. I did not go this route because, well, I like the performance that
comes with WSL2. I also plan to use VirtualBox only rarely, when I need to test
new versions of our desktop application&rsquo;s installation procedure.</p><p>This is all not ideal, of course. The situation is evolving. <a href=https://github.com/MicrosoftDocs/WSL/issues/536>This ticket</a>
on the WSL documentation repository is probably the place to watch for updates.</p><p>Hopefully, soon, once the currently &ldquo;immature API&rdquo; stabilizes, I will be able
to come back to this article, edit it, and note that now everything works as
expected.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://nicolaiarocci.com/tags/linux/>Linux</a></li><li><a href=https://nicolaiarocci.com/tags/windows10/>Windows10</a></li><li><a href=https://nicolaiarocci.com/tags/virtualbox/>Virtualbox</a></li></ul></footer></article></main><footer class=footer><span>Produced / Written / Maintained by <a href=/>Nicola Iarocci</a> since 2010</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>