<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Fattura Elettronica Open Source | Nicola Iarocci</title>
<meta name=keywords content=".net,fattura elettronica,open source"><meta name=description content="this post is about an all-italian open source release, so it’s going to be in italian
FatturaElettronicaPA è un nuovo progetto open source che ho rilasciato qualche giorno fa assieme alla mia azienda. Si tratta di una libreria C# che permette di leggere, scrivere e convalidare le Fatture Elettroniche aderenti alle specifiche del sistema di interscambio della Pubblica Amministrazione."><meta name=author content="Nicola Iarocci"><link rel=canonical href=https://nicolaiarocci.com/fattura-elettronica-open-source/><link crossorigin=anonymous href=/assets/css/stylesheet.2d50b1531bd1b3146d65c5543bd298f7f982786aadee4c223cb3a1cb51906106.css integrity="sha256-LVCxUxvRsxRtZcVUO9KY9/mCeGqt7kwiPLOhy1GQYQY=" rel="preload stylesheet" as=style><link rel=icon href=https://nicolaiarocci.com/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://nicolaiarocci.com/images/favicon16x16.ico><link rel=icon type=image/png sizes=32x32 href=https://nicolaiarocci.com/images/favicon32x32.ico><link rel=apple-touch-icon href=https://nicolaiarocci.com/images/favicon.ico><link rel=mask-icon href=https://nicolaiarocci.com/images/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Fattura Elettronica Open Source"><meta property="og:description" content="this post is about an all-italian open source release, so it’s going to be in italian
FatturaElettronicaPA è un nuovo progetto open source che ho rilasciato qualche giorno fa assieme alla mia azienda. Si tratta di una libreria C# che permette di leggere, scrivere e convalidare le Fatture Elettroniche aderenti alle specifiche del sistema di interscambio della Pubblica Amministrazione."><meta property="og:type" content="article"><meta property="og:url" content="https://nicolaiarocci.com/fattura-elettronica-open-source/"><meta property="article:section" content="post"><meta property="article:published_time" content="2015-02-10T00:00:00+00:00"><meta property="article:modified_time" content="2015-02-10T00:00:00+00:00"><meta property="og:site_name" content="Nicola Iarocci"><meta name=twitter:card content="summary"><meta name=twitter:title content="Fattura Elettronica Open Source"><meta name=twitter:description content="this post is about an all-italian open source release, so it’s going to be in italian
FatturaElettronicaPA è un nuovo progetto open source che ho rilasciato qualche giorno fa assieme alla mia azienda. Si tratta di una libreria C# che permette di leggere, scrivere e convalidare le Fatture Elettroniche aderenti alle specifiche del sistema di interscambio della Pubblica Amministrazione."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://nicolaiarocci.com/post/"},{"@type":"ListItem","position":3,"name":"Fattura Elettronica Open Source","item":"https://nicolaiarocci.com/fattura-elettronica-open-source/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Fattura Elettronica Open Source","name":"Fattura Elettronica Open Source","description":"this post is about an all-italian open source release, so it’s going to be in italian\nFatturaElettronicaPA è un nuovo progetto open source che ho rilasciato qualche giorno fa assieme alla mia azienda. Si tratta di una libreria C# che permette di leggere, scrivere e convalidare le Fatture Elettroniche aderenti alle specifiche del sistema di interscambio della Pubblica Amministrazione.\n","keywords":[".net","fattura elettronica","open source"],"articleBody":"this post is about an all-italian open source release, so it’s going to be in italian\nFatturaElettronicaPA è un nuovo progetto open source che ho rilasciato qualche giorno fa assieme alla mia azienda. Si tratta di una libreria C# che permette di leggere, scrivere e convalidare le Fatture Elettroniche aderenti alle specifiche del sistema di interscambio della Pubblica Amministrazione.\nRilasciata come Portable Class Library, FatturaElettronicaPA gira senza modifiche sui seguenti ambienti:\n.NET Framework 4.0 e superiori, Xamarin.iOS Xamarin.Android Windows Phone 8 Windows Store apps (Windows 8) Silverlight 5.0 Come usare la Fattura Elettronica PA Usarla è molto semplice. Prima creiamo una istanza di FatturaElettronica:\n// instanzia una nuova fattura elettronica FatturaElettronica fattura = new FatturaElettronica(); Quindi leggiamo da un file standard SDI. E’ sufficiente passare un XmlReader attivo al metodo FatturaElettronica.ReadXml():\n// lettura da file XML compatibile con formato SDI1.1 var s = new XmlReaderSettings {IgnoreWhitespace = true}; var r = XmlReader.Create(\"IT01234567890_11111.xml\", s); fattura.ReadXml(r); La fattura si aggiorna cambiando i valori delle sue proprietà. Qui aggiorniamo il regime fiscale del mittente. Basterebbe una sola riga di codice; usiamo tre linee per una migliore leggibilità:\n// modifica valore var header = fattura.FatturaElettronicaHeader var prestatore = header.CedentePrestatore prestatore.DatiAnagrafici.RegimeFiscale = \"RF11\"; Convalidare una fattura è un gioco da ragazzi. La proprietà Error conterrà tutti gli errori eventualmente riscontrati.\n// convalida documento if (!fattura.IsValid) { Debug.WriteLine(fattura.Error); } Stampiano la fattura come flusso JSON:\n// serializzazione JSON var json = fattura.ToJson(JsonOptions.Indented); Debug.WriteLine(json); Infine, salvarla su file standard SDI è solo questione di aprire un file con XmlWriter e passarlo al metodo WriteXml:\n// serializzazione XML secondo lo standard SDI 1.1 var s = new XmlWriterSettings { Indent = true }; XmlWriter w; var fileName = \"IT01234567890_11111.xml\" using (w = XmlWriter.Create(fileName, s)) { fattura.WriteXml(w); } Installazione FatturaElettronicaPA è un package NuGet. Per installarlo è sufficiente usare la Package Console manualmente:\nPM\u003e Install-Package FatturaElettronicaPA oppure usare la interfaccia di Visual Studio.\nProgetti satellite FatturaElettronica deriva a sua volta da BusinessObjects, una classe che implementa la (de)serializzazione e la convalida base.\nFatturaElettronica.Forms è invece una libreria WinForms che provvede una UI per l’editing e la segnalazione degli errori di convalida. Al momento supporta l’intestazione (header) e viene già usato in produzione nel nostro software gestionale:\nIn futuro sarebbe utile aggiungere supporto per la visualizzazione e convalida del corpo fattura (Body).\nFatturaElettronica.WebServices consente di interrogare i diversi Web Service della Pubblica Amministrazione dedicati alla fatturazione elettronica. Tutti i progetti relativi alla fatturazione elettronica sono disponibili su GitHub.\nPerché la Fattura Elettronica Open Source? Dallo scorso 6 Giugno 2014 i Ministeri, le Agenzie fiscali, le scuole e gli enti nazionali di previdenza non accettano più fatture emesse o trasmesse in forma cartacea. A partire dal 31 marzo 2015 la stessa disposizione è estesa agli altri Enti a carattere Nazionale ed a tutte le amministrazioni locali.\nL’adozione delle fatture elettroniche è in pieno svolgimento e non crediamo di sbagliarci immaginando un futuro non troppo remoto in cui questo formato verrà adottato (per imposizione, come ci pare probabile, o per comodità) anche dal settore privato, diventando di fatto lo standard di riferimento.\nNoi ci siamo trovati a dover implementare il supporto per la fatturazione elettronica per gli utenti di Amica 10, il nostro software gestionale. Abbiamo pensato che questa fosse una buona occasione per rendere libero il nostro lavoro così che chiunque possa utilizzarlo per mettersi rapidamente al passo e magari decidere di dare una mano in uno dei tanti modi possibili: segnalando problemi, contribuendo direttamente al progetto, o semplicemente parlandone in giro.\nIl software è migliore quando è condiviso.\nIf you want to get in touch, I am @nicolaiarocci on Twitter.\n","wordCount":"600","inLanguage":"en","datePublished":"2015-02-10T00:00:00Z","dateModified":"2015-02-10T00:00:00Z","author":{"@type":"Person","name":"Nicola Iarocci"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://nicolaiarocci.com/fattura-elettronica-open-source/"},"publisher":{"@type":"Organization","name":"Nicola Iarocci","logo":{"@type":"ImageObject","url":"https://nicolaiarocci.com/images/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nicolaiarocci.com accesskey=h title="Home (Alt + H)"><img src=https://nicolaiarocci.com/images/avatar.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://nicolaiarocci.com/opensource/ title=code><span>code</span></a></li><li><a href=https://nicolaiarocci.com/speaking/ title=conferences><span>conferences</span></a></li><li><a href=https://nicolaiarocci.com/books-i-have-read/ title=library><span>library</span></a></li><li><a href=https://nicolaiarocci.com/archives/ title=archive><span>archive</span></a></li><li><a href=https://nicolaiarocci.com/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Fattura Elettronica Open Source</h1><div class=post-meta><span title='2015-02-10 00:00:00 +0000 UTC'>February 10, 2015</span>&nbsp;·&nbsp;Nicola Iarocci</div></header><div class=post-content><p><em>this post is about an all-italian open source release, so it’s going to be in italian</em></p><p><a href=https://github.com/FatturaElettronicaPA>FatturaElettronicaPA</a> è un nuovo progetto open source che ho rilasciato qualche giorno fa assieme alla <a href=http://gestionaleamica.com>mia azienda</a>. Si tratta di una libreria C# che permette di leggere, scrivere e convalidare le Fatture Elettroniche aderenti alle specifiche del <a href=http://www.fatturapa.gov.it/export/fatturazione/sdi/Specifiche_tecniche_del_formato_FatturaPA_V1.1.pdf>sistema di interscambio</a> della Pubblica Amministrazione.</p><p>Rilasciata come <a href="https://msdn.microsoft.com/en-us/library/gg597391%28v=vs.110%29.aspx">Portable Class Library</a>, FatturaElettronicaPA gira senza modifiche sui seguenti ambienti:</p><ul><li>.NET Framework 4.0 e superiori,</li><li>Xamarin.iOS</li><li>Xamarin.Android</li><li>Windows Phone 8</li><li>Windows Store apps (Windows 8)</li><li>Silverlight 5.0</li></ul><h2 id=come-usare-la-fattura-elettronica-pa>Come usare la Fattura Elettronica PA<a hidden class=anchor aria-hidden=true href=#come-usare-la-fattura-elettronica-pa>#</a></h2><p>Usarla è molto semplice. Prima creiamo una istanza di <code>FatturaElettronica</code>:</p><pre><code>// instanzia una nuova fattura elettronica
FatturaElettronica fattura = new FatturaElettronica();
</code></pre><p>Quindi leggiamo da un file standard SDI. E’ sufficiente passare un <code>XmlReader</code> attivo al metodo <code>FatturaElettronica.ReadXml()</code>:</p><pre><code>// lettura da file XML compatibile con formato SDI1.1
var s = new XmlReaderSettings {IgnoreWhitespace = true};
var r = XmlReader.Create(&quot;IT01234567890_11111.xml&quot;, s);
fattura.ReadXml(r);
</code></pre><p>La fattura si aggiorna cambiando i valori delle sue proprietà. Qui aggiorniamo il regime fiscale del mittente. Basterebbe una sola riga di codice; usiamo tre linee per una migliore leggibilità:</p><pre><code>// modifica valore
var header = fattura.FatturaElettronicaHeader
var prestatore = header.CedentePrestatore
prestatore.DatiAnagrafici.RegimeFiscale = &quot;RF11&quot;;
</code></pre><p>Convalidare una fattura è un gioco da ragazzi. La proprietà <code>Error</code> conterrà tutti gli errori eventualmente riscontrati.</p><pre><code>// convalida documento
if (!fattura.IsValid) {
    Debug.WriteLine(fattura.Error);
}
</code></pre><p>Stampiano la fattura come flusso JSON:</p><pre><code>// serializzazione JSON
var json = fattura.ToJson(JsonOptions.Indented);
Debug.WriteLine(json);
</code></pre><p>Infine, salvarla su file standard SDI è solo questione di aprire un file con <code>XmlWriter</code> e passarlo al metodo <code>WriteXml</code>:</p><pre><code>// serializzazione XML secondo lo standard SDI 1.1
var s = new XmlWriterSettings { Indent = true };

XmlWriter w;
var fileName = &quot;IT01234567890_11111.xml&quot;
using (w = XmlWriter.Create(fileName, s)) {
    fattura.WriteXml(w);
}
</code></pre><h2 id=installazione>Installazione<a hidden class=anchor aria-hidden=true href=#installazione>#</a></h2><p>FatturaElettronicaPA è un package <a href=https://www.nuget.org/packages/FatturaElettronicaPA/>NuGet</a>. Per installarlo è sufficiente usare la Package Console manualmente:</p><pre><code>PM&gt; Install-Package FatturaElettronicaPA
</code></pre><p>oppure usare la interfaccia di Visual Studio.</p><h2 id=progetti-satellite>Progetti satellite<a hidden class=anchor aria-hidden=true href=#progetti-satellite>#</a></h2><p><code>FatturaElettronica</code> deriva a sua volta da <a href=https://github.com/FatturaElettronicaPA/BusinessObjects>BusinessObjects</a>, una classe che implementa la (de)serializzazione e la convalida base.</p><p><a href=https://github.com/FatturaElettronicaPA/FatturaElettronicaPA.Forms>FatturaElettronica.Forms</a> è invece una libreria WinForms che provvede una UI per l’editing e la segnalazione degli errori di convalida. Al momento supporta l’intestazione (header) e viene già usato in produzione nel nostro software gestionale:</p><p>In futuro sarebbe utile aggiungere supporto per la visualizzazione e convalida del corpo fattura (Body).</p><p><a href=https://github.com/FatturaElettronicaPA/FatturaElettronicaPA.WebServices>FatturaElettronica.WebServices</a> consente di interrogare i diversi Web Service della Pubblica Amministrazione dedicati alla fatturazione elettronica. Tutti i progetti relativi alla fatturazione elettronica sono disponibili su <a href=https://github.com/FatturaElettronicaPA>GitHub</a>.</p><h2 id=perché-la-fattura-elettronica-open-source>Perché la Fattura Elettronica Open Source?<a hidden class=anchor aria-hidden=true href=#perché-la-fattura-elettronica-open-source>#</a></h2><p>Dallo scorso 6 Giugno 2014 i Ministeri, le Agenzie fiscali, le scuole e gli enti nazionali di previdenza non accettano più fatture emesse o trasmesse in forma cartacea. A partire dal 31 marzo 2015 la stessa disposizione è estesa agli altri Enti a carattere Nazionale ed a tutte le amministrazioni locali.</p><p>L’adozione delle fatture elettroniche è in pieno svolgimento e non crediamo di sbagliarci immaginando un futuro non troppo remoto in cui questo formato verrà adottato (per imposizione, come ci pare probabile, o per comodità) anche dal settore privato, diventando di fatto lo standard di riferimento.</p><p>Noi ci siamo trovati a dover implementare il supporto per la fatturazione elettronica per gli utenti di <a href=http://gestionaleamica.com>Amica 10</a>, il nostro software gestionale. Abbiamo pensato che questa fosse una buona occasione per rendere libero il nostro lavoro così che chiunque possa utilizzarlo per mettersi rapidamente al passo e magari decidere di dare una mano in uno dei tanti modi possibili: <a href=https://github.com/FatturaElettronicaPA/FatturaElettronicaPA/issues>segnalando problemi</a>, <a href=https://github.com/FatturaElettronicaPA>contribuendo direttamente</a> al progetto, o semplicemente parlandone in giro.</p><p>Il software è migliore quando è condiviso.</p><p>If you want to get in touch, I am @<a href=http://twitter.com/nicolaiarocci>nicolaiarocci</a> on Twitter.</p><i>Subscribe to my <a href=https://buttondown.email/nicolaiarocci>newsletter</a> or the <a href=/index.xml>RSS
feed</a>. Follow me on <a href=https://fosstodon.org/@nicola>Mastodon</a> or <a href=https://twitter.com/nicolaiarocci>X</a>.</div><footer class=post-footer><ul class=post-tags><li><a href=https://nicolaiarocci.com/tags/.net/>.net</a></li><li><a href=https://nicolaiarocci.com/tags/fattura-elettronica/>fattura elettronica</a></li><li><a href=https://nicolaiarocci.com/tags/open-source/>open source</a></li></ul></footer></article></main><footer class=footer><span>Produced / Written / Maintained by <a href=/>Nicola Iarocci</a> since 2010</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>