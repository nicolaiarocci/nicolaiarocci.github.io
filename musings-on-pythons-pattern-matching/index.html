<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Musings on Python's Pattern Matching | Nicola Iarocci</title>
<meta name=keywords content="python,programming"><meta name=description content="Pattern Matching is coming to Python, and I am not sure I like it. Don&rsquo;t get me wrong, I love pattern matching. I use it all the time in F#. I am sure that once it lands in the language, it will be wildly adopted.
So what&rsquo;s the problem with Python&rsquo;s pattern matching? The community, some core developers included, has expressed several concerns. The Python Steering Council has acknowledged them and is willing to look into improvements should they be proposed."><meta name=author content><link rel=canonical href=https://nicolaiarocci.com/musings-on-pythons-pattern-matching/><link crossorigin=anonymous href=/assets/css/stylesheet.f0568d4df87da526a07cdd5f492b4a146e3fa93d5ee950200eaafb2bb50d6fd8.css integrity="sha256-8FaNTfh9pSagfN1fSStKFG4/qT1e6VAgDqr7K7UNb9g=" rel="preload stylesheet" as=style><link rel=icon href=https://nicolaiarocci.com/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://nicolaiarocci.com/images/favicon16x16.ico><link rel=icon type=image/png sizes=32x32 href=https://nicolaiarocci.com/images/favicon32x32.ico><link rel=apple-touch-icon href=https://nicolaiarocci.com/images/favicon.ico><link rel=mask-icon href=https://nicolaiarocci.com/images/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Musings on Python's Pattern Matching"><meta property="og:description" content="Pattern Matching is coming to Python, and I am not sure I like it. Don&rsquo;t get me wrong, I love pattern matching. I use it all the time in F#. I am sure that once it lands in the language, it will be wildly adopted.
So what&rsquo;s the problem with Python&rsquo;s pattern matching? The community, some core developers included, has expressed several concerns. The Python Steering Council has acknowledged them and is willing to look into improvements should they be proposed."><meta property="og:type" content="article"><meta property="og:url" content="https://nicolaiarocci.com/musings-on-pythons-pattern-matching/"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-02-23T07:05:25+01:00"><meta property="article:modified_time" content="2021-02-23T07:05:25+01:00"><meta property="og:site_name" content="Nicola Iarocci"><meta name=twitter:card content="summary"><meta name=twitter:title content="Musings on Python's Pattern Matching"><meta name=twitter:description content="Pattern Matching is coming to Python, and I am not sure I like it. Don&rsquo;t get me wrong, I love pattern matching. I use it all the time in F#. I am sure that once it lands in the language, it will be wildly adopted.
So what&rsquo;s the problem with Python&rsquo;s pattern matching? The community, some core developers included, has expressed several concerns. The Python Steering Council has acknowledged them and is willing to look into improvements should they be proposed."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://nicolaiarocci.com/post/"},{"@type":"ListItem","position":3,"name":"Musings on Python's Pattern Matching","item":"https://nicolaiarocci.com/musings-on-pythons-pattern-matching/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Musings on Python's Pattern Matching","name":"Musings on Python\u0027s Pattern Matching","description":"Pattern Matching is coming to Python, and I am not sure I like it. Don\u0026rsquo;t get me wrong, I love pattern matching. I use it all the time in F#. I am sure that once it lands in the language, it will be wildly adopted.\nSo what\u0026rsquo;s the problem with Python\u0026rsquo;s pattern matching? The community, some core developers included, has expressed several concerns. The Python Steering Council has acknowledged them and is willing to look into improvements should they be proposed.","keywords":["python","programming"],"articleBody":"Pattern Matching is coming to Python, and I am not sure I like it. Don’t get me wrong, I love pattern matching. I use it all the time in F#. I am sure that once it lands in the language, it will be wildly adopted.\nSo what’s the problem with Python’s pattern matching? The community, some core developers included, has expressed several concerns. The Python Steering Council has acknowledged them and is willing to look into improvements should they be proposed. I am not going into the details here. You can look them up yourself. Let’s just say that there are a few gotchas, like the requirement to use dotted names as constants, to prevent them from being interpreted as capture variables instead (doh!) The lack of local scope bites hard here.\nIf we look at pattern matching in isolation, it is undoubtedly desirable. There ought to be a reason why every language on the planet is trying to adopt it. Is it pythonic? I doubt it. With all its corner cases and the odd syntax, I think that the current design adds quite a bit of complexity to the language. As someone noted, core dev Larry Hastings puts it well:\nI dislike the syntax and semantics expressed in PEP 634. I see the match statement as a DSL contrived to look like Python and to be used inside of Python, but with very different semantics. When you enter a PEP 634 match statement, the rules of the language change completely, and code that looks like existing Python code does something surprisingly very different (source)\nI especially agree with this sentiment, and I am still quoting Hastings:\nI think the bar for adding new syntax to Python at this point in its life should be set very high. The language is already conceptually pretty large, and every new feature means new concepts one must learn if one is to read an arbitrary blob of someone else’s Python code. The bigger the new syntax, the higher the bar should become, and so the bigger payoff the new syntax has to provide.\nUnfortunately, I feel like this trend of getting away from pythonic-Python has been going on for a while. As my friend Alessandro Molina mentioned just today:\nI have been thinking about how Python has been moving away from its own Zen since the time of “async” keyword. Convenience rarely values added complexity. Never been a big fan of adding keywords that will be misused by the majority to deal with the vertical needs of a minority (source)\nHe was referring to group exceptions, not pattern matching. Still, his tweet struck a nerve as I was busy writing down these thoughts.\nMore generally, I am concerned with all the recent attempts to take features from functional languages and bring them over to object-oriented languages. It’s not just a Python thing; C# just ported Records, pattern matching, and a few other things over from F#/ML. I understand that like 85% of the software development crowd is into object-oriented languages, but look, it’s going to exceptionally hard to successfully and seamlessly move features from apples to oranges.\nSubscribe to the newsletter, the RSS feed, or follow @nicolaiarocci on Twitter\n","wordCount":"536","inLanguage":"en","datePublished":"2021-02-23T07:05:25+01:00","dateModified":"2021-02-23T07:05:25+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://nicolaiarocci.com/musings-on-pythons-pattern-matching/"},"publisher":{"@type":"Organization","name":"Nicola Iarocci","logo":{"@type":"ImageObject","url":"https://nicolaiarocci.com/images/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nicolaiarocci.com accesskey=h title="Home (Alt + H)"><img src=https://nicolaiarocci.com/images/avatar.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://nicolaiarocci.com/opensource/ title=code><span>code</span></a></li><li><a href=https://nicolaiarocci.com/speaking/ title=conferences><span>conferences</span></a></li><li><a href=https://nicolaiarocci.com/books-i-have-read/ title=library><span>library</span></a></li><li><a href=https://nicolaiarocci.com/archives/ title=archive><span>archive</span></a></li><li><a href=https://nicolaiarocci.com/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Musings on Python's Pattern Matching</h1><div class=post-meta><span title='2021-02-23 07:05:25 +0100 CET'>February 23, 2021</span></div></header><div class=post-content><p>Pattern Matching <a href=https://lwn.net/Articles/845480/>is coming</a> to Python, and I am not sure I like it. Don&rsquo;t get me
wrong, I love pattern matching. I use it all the time in F#. I am sure that
once it lands in the language, it will be wildly adopted.</p><p>So what&rsquo;s the problem with Python&rsquo;s pattern matching? The community, some core
developers included, has expressed <a href=https://discuss.python.org/t/gauging-sentiment-on-pattern-matching/5770>several concerns</a>. The Python Steering
Council has acknowledged them and is willing to look into improvements should
they be proposed. I am not going into the details here. You can look them up
yourself. Let&rsquo;s just say that there are a few gotchas, like the requirement to
use dotted names as constants, to prevent them from being interpreted as
capture variables instead (doh!) The lack of local scope bites hard here.</p><p>If we look at pattern matching in isolation, it is undoubtedly desirable. There
ought to be a reason why every language on the planet is trying to adopt it. Is
it pythonic? I doubt it. With all its corner cases and the odd syntax, I think
that the current design adds quite a bit of complexity to the language. As
someone <a href="https://news.ycombinator.com/item?id=26083779">noted</a>, core dev Larry Hastings puts it well:</p><blockquote><p>I dislike the syntax and semantics expressed in PEP 634. I see the match
statement as a DSL contrived to look like Python and to be used inside of
Python, but with very different semantics. When you enter a PEP 634 match
statement, the rules of the language change completely, and code that looks
like existing Python code does something surprisingly very different (<a href=https://discuss.python.org/t/gauging-sentiment-on-pattern-matching/5770/21>source</a>)</p></blockquote><p>I especially agree with this sentiment, and I am still quoting Hastings:</p><blockquote><p><strong>I think the bar for adding new syntax to Python at this point in its life
should be set very high</strong>. The language is already conceptually pretty large,
and every new feature means new concepts one must learn if one is to read an
arbitrary blob of someone else&rsquo;s Python code. The bigger the new syntax, the
higher the bar should become, and so the bigger payoff the new syntax has to
provide.</p></blockquote><p>Unfortunately, I feel like this trend of getting away from pythonic-Python has
been going on for a while. As my friend Alessandro Molina mentioned just today:</p><blockquote><p>I have been thinking about how Python has been moving away from its own Zen
since the time of &ldquo;async&rdquo; keyword. Convenience rarely values added
complexity. Never been a big fan of adding keywords that will be misused by
the majority to deal with the vertical needs of a minority (<a href=https://twitter.com/__amol__/status/1364205630928617473>source</a>)</p></blockquote><p>He was referring to group exceptions, not pattern matching. Still, his tweet
struck a nerve as I was busy writing down these thoughts.</p><p>More generally, I am concerned with all the recent attempts to take features
from functional languages and bring them over to object-oriented languages.
It&rsquo;s not just a Python thing; C# just ported Records, pattern matching, and
a few other things over from F#/ML. I understand that like 85% of the software
development crowd is into object-oriented languages, but look, it&rsquo;s going to
exceptionally hard to successfully and seamlessly move features from apples to
oranges.</p><p><em>Subscribe to the <a href=https://nicolaiarocci.substack.com>newsletter</a>, the <a href=https://nicolaiarocci.com/index.xml>RSS feed</a>, or follow @<a href=http://twitter.com/nicolaiarocci>nicolaiarocci</a> on Twitter</em></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://nicolaiarocci.com/tags/python/>python</a></li><li><a href=https://nicolaiarocci.com/tags/programming/>programming</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://nicolaiarocci.com>Nicola Iarocci</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>