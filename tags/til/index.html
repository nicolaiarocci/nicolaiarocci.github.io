<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>til | Nicola Iarocci</title>
<meta name=keywords content><meta name=description content="This is the personal website of Nicola Iarocci, Software Craftsman."><meta name=author content><link rel=canonical href=https://nicolaiarocci.com/tags/til/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://nicolaiarocci.com/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://nicolaiarocci.com/images/favicon16x16.ico><link rel=icon type=image/png sizes=32x32 href=https://nicolaiarocci.com/images/favicon32x32.ico><link rel=apple-touch-icon href=https://nicolaiarocci.com/images/favicon.ico><link rel=mask-icon href=https://nicolaiarocci.com/images/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://nicolaiarocci.com/tags/til/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="til"><meta property="og:description" content="This is the personal website of Nicola Iarocci, Software Craftsman."><meta property="og:type" content="website"><meta property="og:url" content="https://nicolaiarocci.com/tags/til/"><meta property="og:site_name" content="Nicola Iarocci"><meta name=twitter:card content="summary"><meta name=twitter:title content="til"><meta name=twitter:description content="This is the personal website of Nicola Iarocci, Software Craftsman."></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nicolaiarocci.com accesskey=h title="Nicola Iarocci (Alt + H)"><img src=https://nicolaiarocci.com/images/avatar.png alt aria-label=logo height=35>Nicola Iarocci</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://nicolaiarocci.com/about/ title=about><span>about</span></a></li><li><a href=https://nicolaiarocci.com/opensource/ title=code><span>code</span></a></li><li><a href=https://nicolaiarocci.com/speaking/ title=speaking><span>speaking</span></a></li><li><a href=https://nicolaiarocci.com/books-i-have-read/ title=library><span>library</span></a></li><li><a href=https://buttondown.email/nicolaiarocci title=newsletter><span>newsletter</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://nicolaiarocci.com/index.xml title=rss><span>rss</span></a></li><li><a href=https://nicolaiarocci.com/archives/ title=archive><span>archive</span></a></li><li><a href=https://nicolaiarocci.com/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>til
<a href=/tags/til/index.xml title=RSS aria-label=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Under ASP.NET 8, NGINX returns 502 Bad Gateway after authentication by IdentityServer</h2></header><div class=entry-content><p>Today, I learned the hard way that NGINX has default buffer sizes, which can cause trouble in specific scenarios like mine.</p></div><footer class=entry-footer><span title='2024-09-12 16:17:58 +0200 CEST'>September 12, 2024</span></footer><a class=entry-link aria-label="post link to Under ASP.NET 8, NGINX returns 502 Bad Gateway after authentication by IdentityServer" href=https://nicolaiarocci.com/under-aspnet-8-nginx-returns-502-bad-gateway-after-authentication-by-identityserver/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>ShellCheck</h2></header><div class=entry-content><p>Today I learned about ShellCheck, a static analysis tool that “finds bugs in your scripts”. It can and should be run on the command line, but an online version is also available. It catches most style and syntax errors and has plenty of options, like ignoring specific errors and warnings, which is helpful in CI scenarios.</p></div><footer class=entry-footer><span title='2024-07-24 14:59:21 +0200 CEST'>July 24, 2024</span></footer><a class=entry-link aria-label="post link to ShellCheck" href=https://nicolaiarocci.com/shellcheck/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Bash-Oneliner: a collection of terminal tricks for Linux</h2></header><div class=entry-content><p>Bash-Oneliner is an excellent resource for Bash/Linux users. Most of the “tricks” are well-known, but there is always something to learn. More importantly, finding them all well organized in one file is rare.
I use the reverse lookup of bash-history (Ctrl+R) daily. Still, only today (thanks to an HN comment on Bash-Onliner) did I learn that it also preserves one’s comments, which can be exploited to invoke complex commands quickly:...</p></div><footer class=entry-footer><span title='2024-07-22 15:51:51 +0200 CEST'>July 22, 2024</span></footer><a class=entry-link aria-label="post link to Bash-Oneliner: a collection of terminal tricks for Linux" href=https://nicolaiarocci.com/bash-oneliner-a-collection-of-terminal-tricks-for-linux/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to handle custom claims in an Open ID Connect-authenticated ASP.NET Core app</h2></header><div class=entry-content><p>Today, I learned how to handle custom claims in an Open ID Connect authenticated ASP.NET Core app.
The scenario goes like this. I have an ASP.NET Core app that authenticates with Open Id Connect. It receives a bearer token from the authentication server. Besides OIDC claims, this token has been forged with additional custom claims for use in the app. However, only ODIC claims exist when I parse HttpContext.User.Identity.Claims in my middleware....</p></div><footer class=entry-footer><span title='2024-05-31 15:53:30 +0200 CEST'>May 31, 2024</span></footer><a class=entry-link aria-label="post link to How to handle custom claims in an Open ID Connect-authenticated ASP.NET Core app" href=https://nicolaiarocci.com/how-to-handle-custom-claims-in-an-oidc-authenticated-aspnet-core-app/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>ChatGPT is the perfect Linux assistant</h2></header><div class=entry-content><p>I spent the day doing remote maintenance on multiple Linux machines via ssh. The revelation is that ChatGPT is the bomb for these tasks: What does that command option do? I am trying to remember. What syntax is to install that peculiar and rarely used package on Debian? I am getting this locale configuration error; what was the fix again? All this stuff is answered much sooner than searching online, no matter the search engine....</p></div><footer class=entry-footer><span title='2024-03-29 18:01:58 +0100 CET'>March 29, 2024</span></footer><a class=entry-link aria-label="post link to ChatGPT is the perfect Linux assistant" href=https://nicolaiarocci.com/chatgpt-is-the-perfect-linux-assistant/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>SQLite foreign key constraints are disabled by default</h2></header><div class=entry-content><p>Today, I learned that SQLite only enforces foreign-key constraints if explicitly instructed. I imagine this is well-known and trivial for the SQLite initiated, but we’re a Postgres shop; I have used SQLite sporadically, primarily for experiments like today’s, and this one amenity was certainly unexpected.
Anyways. I had all my ON DELETE CASCADE constraints nicely configured, but related records in child tables were not being deleted when I deleted the parent....</p></div><footer class=entry-footer><span title='2024-02-22 17:35:40 +0100 CET'>February 22, 2024</span></footer><a class=entry-link aria-label="post link to SQLite foreign key constraints are disabled by default" href=https://nicolaiarocci.com/sqlite-foreign-key-constraints-are-disabled-by-default/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Default ASP NET Core 8 port changed from 80 to 8080</h2></header><div class=entry-content><p>Today, I learned the hard way that the default port for ASP.NET Core 8 container images has been updated from port 80 to 8080, quite a remarkable breaking change.
We upgraded our web application from .NET 7 and let the CI pipeline do its work. Finally, we checked the application in the browser to ensure everything was okay, but unfortunately, we got a 502 Bad Gateway error. The Nginx logs revealed that the app was rejecting connections, which was unexpected because we didn’t make any changes there....</p></div><footer class=entry-footer><span title='2024-02-20 11:48:42 +0100 CET'>February 20, 2024</span></footer><a class=entry-link aria-label="post link to Default ASP NET Core 8 port changed from 80 to 8080" href=https://nicolaiarocci.com/default-asp-net-core-8-port-changed-from-80-to-8080/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>GitHub Wikis don't allow edits or pull requests</h2></header><div class=entry-content><p>Today I learned that GitHub wikis are not editable online and do not support pull requests. You can clone and edit a wiki locally but not return your change to the original repository.
I don’t use wikis in my projects; I prefer documentation to stay with the project, usually in a dedicated directory, and publish it on a dedicated site through GitHub Pages. But today was different as I opened a pull request for PaperMod, the Hugo theme I use on this website....</p></div><footer class=entry-footer><span title='2024-02-09 15:58:54 +0100 CET'>February 9, 2024</span></footer><a class=entry-link aria-label="post link to GitHub Wikis don't allow edits or pull requests" href=https://nicolaiarocci.com/github-wikis-dont-allow-edits-or-pull-requests/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>pg_dump and pg_restore can backup and restore single Postgres schemas</h2></header><div class=entry-content><p>Today I learned that pg_dump can make a copy of a Postgres schema instead of the whole database. Likewise, if needed, pg_restore can restore the schema in either the original database or a different one.
Backup of a Postgres schema:
pg_dump -h host -d source_database -U user -n schema_name -F c -f schema_dump_file.dump Restore of a Postgres schema:
pg_restore -h host -d dest_database -U user -n schema_name schema_dump_file.dump All primary and shared knowledge, I am sure....</p></div><footer class=entry-footer><span title='2024-01-30 15:56:15 +0100 CET'>January 30, 2024</span></footer><a class=entry-link aria-label="post link to pg_dump and pg_restore can backup and restore single Postgres schemas" href=https://nicolaiarocci.com/pg_dump-and-pg_restore-can-backup-and-restore-single-postgres-schemas/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Fixing the "Failed to create CoreCLR error 0x80070008" error when starting a .NET 8 docker container</h2></header><div class=entry-content><p>Another day, another unexpected problem. Launching a .NET 8 app from a docker container, I got this error: Failed to create CoreCLR, HRESULT: 0x80070008.
I was puzzled as the same container ran smoothly in our test environment but not in production. I ruled out resource problems (memory or disk full, maybe?) but then compared the Docker Engine versions we run in test and production. Both were old (20. xx when 25 is available), but interestingly, the production version was older....</p></div><footer class=entry-footer><span title='2024-01-26 09:31:47 +0100 CET'>January 26, 2024</span></footer><a class=entry-link aria-label='post link to Fixing the "Failed to create CoreCLR error 0x80070008" error when starting a .NET 8 docker container' href=https://nicolaiarocci.com/fixing-the-failed-to-create-coreclr-error-0x80070008-error-when-starting-a-dotnet-docker-container/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://nicolaiarocci.com/tags/til/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>Produced / Written / Maintained by <a href=/>Nicola Iarocci</a> since 2010</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>