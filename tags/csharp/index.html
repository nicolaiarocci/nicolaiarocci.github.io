<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Csharp | Nicola Iarocci</title>
<meta name=keywords content><meta name=description content="This is the personal website of Nicola Iarocci, Software Craftsman."><meta name=author content><link rel=canonical href=https://nicolaiarocci.com/tags/csharp/><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://nicolaiarocci.com/images/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://nicolaiarocci.com/images/favicon16x16.ico><link rel=icon type=image/png sizes=32x32 href=https://nicolaiarocci.com/images/favicon32x32.ico><link rel=apple-touch-icon href=https://nicolaiarocci.com/images/favicon.ico><link rel=mask-icon href=https://nicolaiarocci.com/images/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://nicolaiarocci.com/tags/csharp/index.xml><link rel=alternate hreflang=en href=https://nicolaiarocci.com/tags/csharp/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://nicolaiarocci.com/tags/csharp/"><meta property="og:site_name" content="Nicola Iarocci"><meta property="og:title" content="Csharp"><meta property="og:description" content="This is the personal website of Nicola Iarocci, Software Craftsman."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Csharp"><meta name=twitter:description content="This is the personal website of Nicola Iarocci, Software Craftsman."></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://nicolaiarocci.com/ accesskey=h title="Nicola Iarocci (Alt + H)"><img src=https://nicolaiarocci.com/images/avatar.png alt aria-label=logo height=35>Nicola Iarocci</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://buttondown.email/nicolaiarocci title=subscribe><span>subscribe</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://nicolaiarocci.com/opensource/ title=code><span>code</span></a></li><li><a href=https://nicolaiarocci.com/speaking/ title=speaking><span>speaking</span></a></li><li><a href=https://nicolaiarocci.com/books-i-have-read/ title=library><span>library</span></a></li><li><a href=https://nicolaiarocci.com/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://nicolaiarocci.com/archives/ title=archive><span>archive</span></a></li><li><a href=https://nicolaiarocci.com/about/ title=about><span>about</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Csharp
<a href=/tags/csharp/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Rediscovering a 2021 podcast on Python, .NET, and open source</h2></header><div class=entry-content><p>Yesterday, the kids came home for the Christmas holidays. Marco surprised me by telling me that on his flight from Brussels, he discovered and listened to “my podcast” on Spotify. I was stunned. I didn’t remember ever recording a podcast, even though I’ve given a few interviews here and there over the years.
During my usual morning walk today, I went to look for it, and there it was, an interview I had done in 2021 that I had completely forgotten about. I got over the initial embarrassment (it’s always strange to hear your own voice) and resisted the temptation to turn it off, listening to it all the way through. I must admit that it captures that moment in my professional life, and much of the content is still relevant, especially regarding my experience as an open-source author and maintainer and my transition from C# to Python and back.
...</p></div><footer class=entry-footer><span title='2025-12-22 10:49:22 +0100 CET'>December 22, 2025</span></footer><a class=entry-link aria-label="post link to Rediscovering a 2021 podcast on Python, .NET, and open source" href=https://nicolaiarocci.com/rediscovering-a-2021-podcast-on-python-.net-and-open-source/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>On C# and .NET quick release cycle</h2></header><div class=entry-content><p>I sat to jot down a quick introduction to my C# 13 What’s New and Interesting session next week, and what I ended up with instead is a long rant or, should I dare, stream of consciousness that is certainly inappropriate for a five-minute introduction. I’ll have to cut most of it down, especially on the personal story part, but my site might be a good place to host it in all its completeness. I may reference this post at the start of the session on Monday for those few poor souls who might be interested.
...</p></div><footer class=entry-footer><span title='2024-12-09 17:31:18 +0100 CET'>December 9, 2024</span></footer><a class=entry-link aria-label="post link to On C# and .NET quick release cycle" href=https://nicolaiarocci.com/on-csharp-and-dotnet-quick-release-cycle/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to handle custom claims in an Open ID Connect-authenticated ASP.NET Core app</h2></header><div class=entry-content><p>Today, I learned how to handle custom claims in an Open ID Connect authenticated ASP.NET Core app.
The scenario goes like this. I have an ASP.NET Core app that authenticates with Open Id Connect. It receives a bearer token from the authentication server. Besides OIDC claims, this token has been forged with additional custom claims for use in the app. However, only ODIC claims exist when I parse HttpContext.User.Identity.Claims in my middleware. If I retrieve the token with HttpContext.GetTokenAsync and decode it, I confirm it contains all the claims I need. Where have my custom claims gone? Or, how can I get User.Identity to provide them along with the OIDC ones?
...</p></div><footer class=entry-footer><span title='2024-05-31 15:53:30 +0200 CEST'>May 31, 2024</span></footer><a class=entry-link aria-label="post link to How to handle custom claims in an Open ID Connect-authenticated ASP.NET Core app" href=https://nicolaiarocci.com/how-to-handle-custom-claims-in-an-oidc-authenticated-aspnet-core-app/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>C# 12 Collection Expressions</h2></header><div class=entry-content><p>This is a follow-up post to C# 12 Primary Constructors. Like that article, this one originates from the preparation notes for my presentation at the ABP Dotnet Conference 2024.
I love collection expressions. Like primary constructors, collection expressions will see a significant adoption in the long run.
Collection expressions introduce a new way to initialize common collection values in a terse, unified syntax.
This is how we initialize collections today:
var x1 = new int[] { 1, 2, 3, 4 }; var x2 = Array.Empty&lt;int>(); WriteByteArray(new[] { (byte)1, (byte)2, (byte)3 }); List&lt;int> x3 = new() { 1, 2, 3, 4 }; Span&lt;DateTime> dates = stackalloc DateTime[] { GetDate(0), GetDate(1) }; WriteByteSpan(stackalloc[] { (byte)1, (byte)2, (byte)3 }); Notice how the code is diverse depending on the type and the context. It is also verbose. Look at how we initialize an empty int array (second line); it’s lengthy and starkly contrasts with the previous line, where we initialize the same type with some actual values. In many situations, casting is needed; again, take a look at the WriteByteArray and WriteByteSpan calls.
...</p></div><footer class=entry-footer><span title='2024-05-10 17:39:02 +0200 CEST'>May 10, 2024</span></footer><a class=entry-link aria-label="post link to C# 12 Collection Expressions" href=https://nicolaiarocci.com/csharp-collection-expressions/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>C# 12 Primary Constructors</h2></header><div class=entry-content><p>I wrapped up my C# 12 session at the ABP Dotnet Conference 2024, and I wanted to share the take-home points, at least about the most relevant features in this language version. Posting the slides made no sense as they were minimal; all the content was packed in the live demo.
In a follow-up post, I plan to address Collection Expressions (done) and maybe “type any aliases”; this is about Primary Constructors.
...</p></div><footer class=entry-footer><span title='2024-05-09 18:04:39 +0200 CEST'>May 9, 2024</span></footer><a class=entry-link aria-label="post link to C# 12 Primary Constructors" href=https://nicolaiarocci.com/csharp-primary-constructors/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>I am speaking at ABP Dotnet Conf'24</h2></header><div class=entry-content><p>I am thrilled to have the opportunity to present at an international conference once again. On May 9th, I will speak at the ABP Donet Conf'24. My session, titled C #12: What’s New and Interesting, is on a topic I’m passionate about.
With the alignment of C# and Dotnet Core release cycles, the C# release cadence has increased (we’re on a yearly cycle now), while feature quantity has reduced for individual releases, which is good. The faster, smaller iterations allow for quicker course corrections, and introducing fewer new features makes it easier to embrace the changes.
...</p></div><footer class=entry-footer><span title='2024-04-15 15:01:12 +0200 CEST'>April 15, 2024</span></footer><a class=entry-link aria-label="post link to I am speaking at ABP Dotnet Conf'24" href=https://nicolaiarocci.com/i-am-speaking-at-abp-dotnet-conf24.md/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://nicolaiarocci.com/images/dotnet-conference-italia.jpg alt="Early in the morning at the Microsoft House in Milan. Preparations underway"></figure><header class=entry-header><h2 class=entry-hint-parent>Video of my C# 12 session at .NET Conference Italia 2023</h2></header><div class=entry-content><p>The video and slides of my C# 12 session at .NET Conference Italia 2023 is finally available online. Unfortunately it’s just my voice and my laptop screen, and that’s too bad because the location was as cool as it can get, and the room was packed.
It is in Italian1 and you need to login in order to see it (sorry, I don’t have control over it.)
I also submitted to several international conferences; let’s see what happens. Since the COVID hiatus, I’ve had no luck with international events. ↩︎
...</p></div><footer class=entry-footer><span title='2024-01-26 15:39:31 +0100 CET'>January 26, 2024</span></footer><a class=entry-link aria-label="post link to Video of my C# 12 session at .NET Conference Italia 2023" href=https://nicolaiarocci.com/video-of-my-csharp-12-session-at-dotnet-conference-italia-2023/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to implement a PKCE code challenge in C#</h2></header><div class=entry-content><p>Today’s fun was implementing OAuth2’s RFC 7636’s PKCE (Proof Key for Code Exchange) in C#. It’s relatively straightforward, but I decided to share my implementation should it be helpful to someone else out there.
PKCE is an extension to the Authorization Code flow to prevent CSRF and authorization code injection attacks. [..] It was originally designed to protect the authorization code flow in mobile apps, but its ability to prevent authorization code injection makes it useful for every type of OAuth client, even web apps that use client authentication (source).
...</p></div><footer class=entry-footer><span title='2024-01-17 18:28:14 +0100 CET'>January 17, 2024</span></footer><a class=entry-link aria-label="post link to How to implement a PKCE code challenge in C#" href=https://nicolaiarocci.com/how-to-implement-pkce-code-challenge-in-csharp/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>How to use XmlWriter along with StringWriter to properly serialize a UTF-8 string</h2></header><div class=entry-content><p>Today, I (re)learned how to serialize an XML to a UTF-8 string. Like all the other times I did this, I got backstabbed by StringWriter, which only supports UTF-16. A simple code snippet like this:
await using var sw = new StringWriter(); await using var w = XmlWriter.Create(sw, new() { Async = true }); ... await w.FlushAsync(); return sw.ToString(); Will emit this output:
&lt;?xml version="1.0" encoding="utf-16"?>&lt;... There’s nothing inherently wrong with UTF-16, but XML is usually UTF-8, so one must do something about it. StringWriter exposes an Encoding property, but it is read-only for unknown reasons. One might think that given that the XmlWriter allows setting its own Encoding value, something like this would work:
...</p></div><footer class=entry-footer><span title='2023-11-09 07:05:25 +0100 CET'>November 9, 2023</span></footer><a class=entry-link aria-label="post link to How to use XmlWriter along with StringWriter to properly serialize a UTF-8 string" href=https://nicolaiarocci.com/how-to-use-xmlwriter-along-with-stringwriter-to-properly-serialize-a-utf-8-string/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>LINQ DistinctBy on a property for .NET Standard and older .NET versions</h2></header><div class=entry-content><p>Today I learned how to implement a custom Enumerable.DistinctBy extension method that returns distinct elements from a sequence according to a specified key selector function.
.NET 6 and its successors have the method built in within LINQ, but I needed it in a .NET Standard 2.0 class library, so I was out of luck. My implementation is simple, not different from others I found online, and should also work fine with old .NET releases. Here it is:
...</p></div><footer class=entry-footer><span title='2023-10-25 07:05:25 +0100 +0100'>October 25, 2023</span></footer><a class=entry-link aria-label="post link to LINQ DistinctBy on a property for .NET Standard and older .NET versions" href=https://nicolaiarocci.com/linq-distinctby-on-a-property-for-dotnet-standard-and-old-dotnet-versions/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://nicolaiarocci.com/tags/csharp/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>Produced / Written / Maintained by <a href=/>Nicola Iarocci</a> since 2010</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>